{%- doc -%}
  Renders Dromgoole's brand info block with logo, tagline, contact info, and store hours.

  @param {object} block - The block object with settings

  Usage: {% render 'dromgooles-brand-info', block: block %}
{%- enddoc -%}

{% liquid
  assign block_settings = block.settings
  assign logo_image = block_settings.logo | default: settings.logo
%}

<div
  class="dromgooles-brand-info"
  style="
    --brand-info-width: {{ block_settings.width }};
    --brand-info-width-mobile: {{ block_settings.width_mobile }};
    --brand-info-alignment: {{ block_settings.alignment }};
    --brand-info-alignment-mobile: {{ block_settings.alignment_mobile }};
  "
  {{ block.shopify_attributes }}
>
  {%- if logo_image != blank -%}
    <div class="dromgooles-brand-info__logo" style="max-width: {{ block_settings.logo_width }}px;">
      <img
        src="{{ logo_image | image_url: width: 600 }}"
        alt="{{ shop.name }}"
        width="{{ block_settings.logo_width }}"
        height="{{ block_settings.logo_width | divided_by: logo_image.aspect_ratio }}"
        loading="lazy"
      >
    </div>
  {%- endif -%}

  {%- if block_settings.tagline != blank -%}
    <p class="dromgooles-brand-info__tagline">{{ block_settings.tagline }}</p>
  {%- endif -%}

  <div class="dromgooles-brand-info__contact">
    {%- if block_settings.phone != blank -%}
      <div class="dromgooles-brand-info__contact-item">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="dromgooles-brand-info__icon"
        >
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
        </svg>
        <a href="tel:{{ block_settings.phone | remove: ' ' | remove: '-' | remove: '.' | remove: '(' | remove: ')' }}">
          {{- block_settings.phone -}}
        </a>
      </div>
    {%- endif -%}

    {%- if block_settings.email != blank -%}
      <div class="dromgooles-brand-info__contact-item">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="dromgooles-brand-info__icon"
        >
          <rect x="2" y="4" width="20" height="16" rx="2"></rect>
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
        </svg>
        <a href="mailto:{{ block_settings.email }}">{{ block_settings.email }}</a>
      </div>
    {%- endif -%}

    {%- if block_settings.address != blank -%}
      <div class="dromgooles-brand-info__contact-item">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="dromgooles-brand-info__icon"
        >
          <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        <span>{{ block_settings.address }}</span>
      </div>
    {%- endif -%}
  </div>

  {%- if block_settings.hours != blank -%}
    <div
      class="dromgooles-brand-info__hours-box"
      style="background-color: {{ block_settings.hours_box_color }}; color: {{ block_settings.hours_box_text_color }};"
    >
      {{- block_settings.hours | strip | newline_to_br -}}
    </div>
  {%- endif -%}
</div>

{% stylesheet %}
  .dromgooles-brand-info {
    width: var(--brand-info-width-mobile);
    text-align: var(--brand-info-alignment-mobile);
  }

  @media screen and (min-width: 750px) {
    .dromgooles-brand-info {
      width: var(--brand-info-width);
      text-align: var(--brand-info-alignment);
    }
  }

  .dromgooles-brand-info__logo {
    margin-bottom: 1.5rem;
    margin-inline: auto;
  }

  @media screen and (min-width: 750px) {
    .dromgooles-brand-info__logo {
      margin-inline: 0;
    }

    .dromgooles-brand-info[style*='--brand-info-alignment: center'] .dromgooles-brand-info__logo {
      margin-inline: auto;
    }

    .dromgooles-brand-info[style*='--brand-info-alignment: right'] .dromgooles-brand-info__logo {
      margin-inline-start: auto;
      margin-inline-end: 0;
    }
  }

  .dromgooles-brand-info__logo img {
    max-width: 100%;
    height: auto;
  }

  .dromgooles-brand-info__tagline {
    font-size: var(--font-size-sm);
    line-height: 1.5;
    margin-bottom: 1.5rem;
    color: var(--color-foreground);
  }

  .dromgooles-brand-info__contact {
    margin-bottom: 1.5rem;
  }

  .dromgooles-brand-info__contact-item {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: var(--font-size-sm);
  }

  @media screen and (min-width: 750px) {
    .dromgooles-brand-info__contact-item {
      justify-content: flex-start;
    }

    .dromgooles-brand-info[style*='--brand-info-alignment: center'] .dromgooles-brand-info__contact-item {
      justify-content: center;
    }

    .dromgooles-brand-info[style*='--brand-info-alignment: right'] .dromgooles-brand-info__contact-item {
      justify-content: flex-end;
    }
  }

  .dromgooles-brand-info__icon {
    width: 1rem;
    height: 1rem;
    flex-shrink: 0;
  }

  .dromgooles-brand-info__contact-item a {
    color: currentColor;
    text-decoration: none;
  }

  .dromgooles-brand-info__contact-item a:hover {
    text-decoration: underline;
  }

  .dromgooles-brand-info__hours-box {
    padding: 0.75rem 1.25rem;
    border-radius: var(--border-radius);
    font-size: var(--font-size-sm);
    line-height: 1.6;
    text-align: center;
    margin-top: 1rem;
    display: inline-block;
    width: 100%;
  }

  @media screen and (min-width: 750px) {
    .dromgooles-brand-info__hours-box {
      width: auto;
    }
  }
{% endstylesheet %}
